import{d as k,e as p,f as g,u as v,g as F,h as C,r as B,c as s,o as t,a as _,b as D,t as n,F as y,i as m,w as f,j as T,k as $,l as h}from"./index-B3u5yad-.js";import{l as w}from"./contentService-Bp1UJfrT.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N=k({name:"CategoryPage",setup(){const a=v(),r=p(!0),u=p([]),c=g(()=>a.params.type),i=g(()=>{switch(c.value){case"characters":return"人物";case"locations":return"地点";case"events":return"事件";default:return"未知分类"}}),l=async()=>{r.value=!0;try{const o=await w(c.value);u.value=o}catch(o){console.error("Failed to load entries",o)}finally{r.value=!1}};return F(l),C(()=>a.params.type,(o,e)=>{o!==e&&l()}),{categoryType:c,categoryTitle:i,loading:r,entries:u}}}),V={class:"category-page"},b={key:0,class:"loading"},L={key:1,class:"no-entries"},P={key:2,class:"entry-grid"},j={key:0,class:"tags"},A={key:1};function I(a,r,u,c,i,l){const o=B("router-link");return t(),s("div",V,[_("h1",null,n(a.categoryTitle),1),a.loading?(t(),s("div",b," 加载中... ")):a.entries.length===0?(t(),s("div",L," 暂无"+n(a.categoryTitle)+"内容，敬请期待！ ",1)):(t(),s("div",P,[(t(!0),s(y,null,m(a.entries,e=>(t(),$(o,{key:e.id,to:`/entry/${a.categoryType}/${e.id}`,class:"entry-card"},{default:f(()=>[_("h2",null,n(e.title),1),e.tags&&e.tags.length>0?(t(),s("div",j,[(t(!0),s(y,null,m(e.tags,d=>(t(),s("span",{class:"tag",key:d},n(d),1))),128))])):h("",!0),e.description?(t(),s("p",A,n(e.description),1)):h("",!0)]),_:2},1032,["to"]))),128))])),D(o,{to:"/",class:"back-link"},{default:f(()=>r[0]||(r[0]=[T("返回首页")])),_:1})])}const q=E(N,[["render",I],["__scopeId","data-v-2655a5a8"]]);export{q as default};
